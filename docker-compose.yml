version: "3"
services:
  worker:
    image: asimmon/bomberjam-worker:latest
    restart: unless-stopped
    privileged: true
    init: true
    environment:
      - API_BASE_URL=https://host.docker.internal:5001/api/
      - API_AUTH_TOKEN=TODO
      - API_POLLING_INTERVAL=5
      - API_VERIFY_SSL=0
      - IS_POLLING_VERBOSE=False
    deploy:
      replicas: 1

  azurite:
    image: mcr.microsoft.com/azure-storage/azurite:latest
    restart: unless-stopped
    ports:
      - "10000:10000"
      - "10001:10001"
      - "10002:10002"
    volumes:
      - azurite_data:/data

volumes:
  azurite_data: